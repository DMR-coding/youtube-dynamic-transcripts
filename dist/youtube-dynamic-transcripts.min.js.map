{"version":3,"sources":["webpack://youtube-dynamic-transcripts/./src/Caption.ts","webpack://youtube-dynamic-transcripts/./src/Transcript.ts","webpack://youtube-dynamic-transcripts/./src/utility.ts","webpack://youtube-dynamic-transcripts/webpack/bootstrap","webpack://youtube-dynamic-transcripts/webpack/runtime/define property getters","webpack://youtube-dynamic-transcripts/webpack/runtime/global","webpack://youtube-dynamic-transcripts/webpack/runtime/hasOwnProperty shorthand","webpack://youtube-dynamic-transcripts/webpack/runtime/make namespace object","webpack://youtube-dynamic-transcripts/webpack/runtime/publicPath","webpack://youtube-dynamic-transcripts/./src/index.ts","webpack://youtube-dynamic-transcripts/./src/index.scss"],"names":["Caption","start","end","text","domElement","document","createElement","textContent","className","LOADING","FAILED_LOAD","OPEN_ME","CLOSE_ME","TRANSCRIPT_URL","Transcript","videoID","lang","transcriptName","captionsURL","get","then","captionsLoaded","catch","captionsFailed","captionBox","captions","xmlCaptions","getElementsByTagName","i","getAttribute","caption","addEventListener","seekToIndex","push","append","scrollTo","length","player","seekTo","event","data","YT","PlayerState","PLAYING","started","stopped","highlightCurrentCaption","removeCurrentHighlight","clearTimeout","currentTime","getCurrentTime","currentCaption","find","toggleClass","isWithinParentViewport","setTimeout","scrollIntoView","waitForNextCaption","nextCaption","secondsUntil","captionTimeout","container","toggler","toggle","getElementById","after","indexOf","url","appendContainer","loadCaptions","Player","videoId","events","onStateChange","node","force","exists","shouldExist","stringFilter","classNames","separator","split","filter","c","join","Promise","resolve","reject","xhr","XMLHttpRequest","open","responseType","onload","response","onerror","status","send","element","rect","getBoundingClientRect","parentRect","parentElement","top","bottom","pendingInits","transcripts","ytdt","init","name","window","oldOnYouTubeIframeAPIReady","onYouTubeIframeAPIReady","pending","apply","console","warn"],"mappings":"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","file":"youtube-dynamic-transcripts.min.js","sourcesContent":["export class Caption {\n  domElement: HTMLElement\n\n  public start: number;\n\n  public end: number;\n\n  constructor(\n    start: number,\n    end: number,\n    text: string,\n  ) {\n    this.end = end;\n    this.start = start;\n    this.domElement = document.createElement('a');\n    this.domElement.textContent = text;\n    this.domElement.className = 'caption';\n  }\n}\n","/// <reference types=\"@types/youtube\" />\n/* global YT */\nimport {\n  get, isWithinParentViewport, toggleClass,\n} from './utility';\nimport { Caption } from './Caption';\n\nconst LOADING = 'Loading transcript...';\nconst FAILED_LOAD = '⚠️ Could not load transcript.';\n\nconst OPEN_ME = 'Open Transcript';\nconst CLOSE_ME = 'Close Transcript';\n\nconst TRANSCRIPT_URL = 'https://video.google.com/timedtext?v=';\n\nexport class Transcript {\n  private player: YT.Player;\n\n  private captionTimeout?: number;\n\n  private currentCaption?: Caption;\n\n  private captions: Caption[] = [];\n\n  private videoID: string;\n\n  private captionBox: HTMLElement;\n\n  private toggler: HTMLElement;\n\n  private container: HTMLElement;\n\n  constructor(videoID: string, lang: string, transcriptName: string) {\n    this.videoID = videoID;\n\n    let url = TRANSCRIPT_URL + videoID;\n\n    if (lang) {\n      url += `&lang=${lang}`;\n    }\n\n    if (transcriptName) {\n      url += `&name=${transcriptName}`;\n    }\n\n    this.appendContainer();\n    this.loadCaptions(url);\n\n    this.player = new YT.Player(videoID, {\n      videoId: videoID,\n      events: { onStateChange: this.onStateChange },\n    });\n  }\n\n  loadCaptions = (captionsURL: string) => {\n    get(captionsURL).then(this.captionsLoaded).catch(this.captionsFailed);\n\n    this.captionBox.textContent = LOADING;\n  }\n\n  captionsLoaded = (captions: Document) => {\n    const xmlCaptions = captions.getElementsByTagName('text');\n\n    this.captionBox.textContent = '';\n\n    for (let i = 0; i < xmlCaptions.length; i += 1) {\n      const start: number = +xmlCaptions[i].getAttribute('start');\n      const end: number = +xmlCaptions[i].getAttribute('dur') + start;\n      const caption = new Caption(start, end, xmlCaptions[i].textContent);\n\n      caption.domElement.addEventListener('click', () => {\n        this.seekToIndex(i);\n      });\n\n      this.captions.push(caption);\n      this.captionBox.append(caption.domElement);\n      this.captionBox.scrollTo(0, 0);\n    }\n  }\n\n  seekToIndex = (i: number) => {\n    const caption = this.captions[i];\n\n    this.player.seekTo(caption.start, true);\n  }\n\n  captionsFailed = () => {\n    this.captionBox.textContent = FAILED_LOAD;\n  }\n\n  onStateChange = (event: YT.OnStateChangeEvent) => {\n    if (event.data === YT.PlayerState.PLAYING) {\n      this.started();\n    } else {\n      this.stopped();\n    }\n  }\n\n  started = () => {\n    this.highlightCurrentCaption();\n  }\n\n  stopped = () => {\n    this.removeCurrentHighlight();\n    this.clearTimeout();\n  }\n\n  highlightCurrentCaption = () => {\n    this.removeCurrentHighlight();\n\n    const currentTime = this.player.getCurrentTime();\n    this.currentCaption = this.captions.find(\n      (caption) => caption.start <= currentTime && caption.end > currentTime,\n    );\n\n    if (this.currentCaption) {\n      toggleClass(this.currentCaption.domElement, 'highlight', true);\n\n      if (!isWithinParentViewport(this.currentCaption.domElement)) {\n        // Defer this so that it'll take effect after the page gets updated with the highlight class\n        setTimeout(() => {\n          this.currentCaption.domElement.scrollIntoView();\n        }, 0);\n      }\n    }\n\n    this.waitForNextCaption();\n  }\n\n  waitForNextCaption = () => {\n    this.clearTimeout();\n    const currentTime = this.player.getCurrentTime();\n    const nextCaption = this.captions.find((caption) => caption.start > currentTime);\n\n    if (nextCaption) {\n      const secondsUntil = nextCaption.start - currentTime;\n      this.captionTimeout = setTimeout(this.highlightCurrentCaption, secondsUntil * 1000);\n    }\n  }\n\n  private clearTimeout = () => {\n    if (this.captionTimeout) {\n      clearTimeout(this.captionTimeout);\n    }\n    this.captionTimeout = null;\n  }\n\n  appendContainer= () => {\n    this.container = document.createElement('div');\n    this.container.className = 'ytdt';\n\n    this.toggler = document.createElement('button');\n    this.toggler.className = 'toggle closed';\n    this.toggler.addEventListener('click', this.toggle);\n    this.toggler.textContent = OPEN_ME;\n    this.container.append(this.toggler);\n\n    this.captionBox = document.createElement('div');\n    this.captionBox.className = 'captions closed';\n    this.container.append(this.captionBox);\n\n    document.getElementById(this.videoID).after(this.container);\n  }\n\n  toggle = () => {\n    toggleClass(this.toggler, 'closed');\n    toggleClass(this.toggler, 'open');\n\n    toggleClass(this.captionBox, 'closed');\n    toggleClass(this.captionBox, 'open');\n\n    if (this.toggler.className.indexOf('closed') > -1) {\n      this.toggler.textContent = OPEN_ME;\n    } else {\n      this.toggler.textContent = CLOSE_ME;\n    }\n  }\n\n  removeCurrentHighlight = () => {\n    if (this.currentCaption) {\n      toggleClass(this.currentCaption.domElement, 'highlight', false);\n      this.currentCaption = null;\n    }\n  }\n}\n","export function toggleClass(node: HTMLElement, className: string, force?: boolean) {\n  const exists = node.className.indexOf(className) >= 0;\n  const shouldExist = force == null ? !exists : force;\n\n  if ((exists && shouldExist) || (!exists && !shouldExist)) {\n    return;\n  }\n\n  if (shouldExist) {\n    node.className += ` ${className}`;\n  } else {\n    node.className = stringFilter(node.className, className, ' ');\n  }\n}\n\nexport function stringFilter(classNames: string, className: string, separator: string): string {\n  return classNames\n    .split(separator)\n    .filter((c) => c !== className)\n    .join(separator);\n}\n\nexport function get(url: string): Promise<Document> {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', url);\n    xhr.responseType = 'document';\n    xhr.onload = () => { resolve(xhr.response); };\n    xhr.onerror = () => { reject(xhr.status); };\n\n    xhr.send();\n  });\n}\n\nexport function isWithinParentViewport(element: HTMLElement) {\n  const rect = element.getBoundingClientRect();\n  const parentRect = element.parentElement.getBoundingClientRect();\n  return (\n    rect.top >= parentRect.top && rect.bottom <= parentRect.bottom\n  );\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","import { Transcript } from './Transcript';\n\nconst pendingInits: [string, string, string][] = [];\nconst transcripts: Transcript[] = [];\n\nconst ytdt = {\n  Transcript,\n  init: (videoId: string, lang: string, name:string) => {\n    if (window.YT) {\n      transcripts.push(new Transcript(videoId, lang, name));\n    } else {\n      pendingInits.push([videoId, lang, name]);\n    }\n  },\n};\n\ndeclare global {\n  export interface Window {\n    ytdt: typeof ytdt,\n    onYouTubeIframeAPIReady: () => void\n  }\n}\n\nconst oldOnYouTubeIframeAPIReady = window.onYouTubeIframeAPIReady;\nwindow.onYouTubeIframeAPIReady = function () {\n  if (oldOnYouTubeIframeAPIReady) { oldOnYouTubeIframeAPIReady(); }\n\n  for (const pending of pendingInits) {\n    ytdt.init.apply(this, pending);\n  }\n};\n\nif (window.ytdt) {\n  console.warn('Namespace already exists; not registering youtube-dynamic-transcripts');\n} else {\n  window.ytdt = ytdt;\n}\n","export default __webpack_public_path__ + \"youtube-dynamic-transcripts.min.css\";"],"sourceRoot":""}